@model CapstoneTraineeManagement.DTO.Program

@{
    ViewData["Title"] = "Program Details";
}

<h1>@Model.Name</h1>
<p>Detailed information for the selected program.</p>
<hr />

<ul class="nav nav-tabs" id="programTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details" type="button" role="tab" aria-controls="details" aria-selected="true">Program Details</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="enrollments-tab" data-bs-toggle="tab" data-bs-target="#enrollments" type="button" role="tab" aria-controls="enrollments" aria-selected="false">Enrolled Trainees (@Model.Enrollments.Count)</button>
    </li>
</ul>

<div class="tab-content" id="programTabContent">
    <div class="tab-pane fade show active p-3 border border-top-0" id="details" role="tabpanel" aria-labelledby="details-tab">
        <dl class="row">
            <dt class="col-sm-3">Program Name</dt>
            <dd class="col-sm-9">@Model.Name</dd>

            <dt class="col-sm-3">Category</dt>
            <dd class="col-sm-9">@Model.CategoryLookUp?.ValueCode</dd>

            <dt class="col-sm-3">Duration</dt>
            <dd class="col-sm-9">@Model.Duration</dd>

            <dt class="col-sm-3">Mode</dt>
            <dd class="col-sm-9">@Model.ModeLookUp?.ValueCode</dd>

            <dt class="col-sm-3">Status</dt>
            <dd class="col-sm-9">
                @if (Model.IsActive)
                {
                    <span class="badge bg-success">Active</span>
                }
                else
                {
                    <span class="badge bg-secondary">Inactive</span>
                }
            </dd>
        </dl>
    </div>
    <div class="tab-pane fade p-3 border border-top-0" id="enrollments" role="tabpanel" aria-labelledby="enrollments-tab">
        <div class="table-responsive">
            <table class="table table-sm">
                <thead>
                    <tr>
                        <th>Trainee Name</th>
                        <th>Age</th>
                        <th>Email</th>
                        <th>Contact No</th>
                        <th>State</th>
                        <th>Enrollment Status</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var enrollment in Model.Enrollments)
                    {
                        <tr>
                            <td>@enrollment.EnrolledTrainee?.FullName</td>
                            <td>@((DateTime.Today.Year - enrollment.EnrolledTrainee.Dob.Year))</td>
                            <td>@enrollment.EnrolledTrainee?.Email</td>
                            <td>@enrollment.EnrolledTrainee?.ContactNo</td>
                            <td>@enrollment.EnrolledTrainee?.StateLookUp?.ValueCode</td>
                            <td><span class="badge bg-info">@enrollment.StatusLookUp?.ValueCode.ToUpper()</span></td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="mt-4">
    <a asp-action="Index" class="btn btn-secondary">Back to Program List</a>
</div>